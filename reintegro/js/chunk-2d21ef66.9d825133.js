(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef66"],{d895:function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-card",{staticClass:"rounded-xl",attrs:{elevation:"7"}},[e("v-card-title",[e("v-spacer")],1),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.dataReintegro,search:t.search,"sort-by":"FechaRegistro","hide-default-footer":""},scopedSlots:t._u([{key:"top",fn:function(){return[e("v-snackbar",{attrs:{color:"success",outlined:"",rounded:"pill"},scopedSlots:t._u([{key:"action",fn:function(a){var o=a.attrs;return[e("v-btn",t._b({attrs:{color:"color",text:""},on:{click:function(a){t.snackbar=!1}}},"v-btn",o,!1),[t._v(" Cerrar ")])]}}]),model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")]),e("div",{staticClass:"text-center"},[e("v-overlay",{attrs:{value:t.overlay}},[e("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1),e("v-toolbar",{attrs:{flat:""}},[e("v-toolbar-title",[t._v("Solicitudes de Reintegro")]),e("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e("h4",[t._v("Total de Registros: "+t._s(t.totalRegistros))]),e("v-spacer"),e("v-autocomplete",{attrs:{items:t.dataStatus,dense:"",label:"Estado","persistent-hint":"","item-text":t.concat,"item-value":"CodEstado","prepend-icon":t.icons.mdiMagnify,clearable:""},on:{input:function(a){return t.filtrar()}},model:{value:t.statusCodeSol,callback:function(a){t.statusCodeSol=a},expression:"statusCodeSol"}}),e("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),e("v-icon",{attrs:{size:"45px"},on:{click:function(a){return t.getReintegro()}}},[t._v(" "+t._s(t.icons.mdiRefreshCircle)+" ")]),e("v-col",{attrs:{cols:"auto"}},[e("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"1500"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("v-card",{staticClass:"rounded-xl",attrs:{elevation:"7"}},[e("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v(" Detalles de la Solicitud ")]),e("v-card-text",[e("v-container",[e("v-row",[e("v-col",{attrs:{cols:"12"}},[e("v-data-table",{staticClass:"elevation-7 rounded-xl",attrs:{headers:t.headersDetails,items:t.dataDetalleReintegro,loading:t.loadingData,"loading-text":"Cargando... Por Favor espere"}})],1)],1)],1)],1),e("v-card-actions",{staticClass:"justify-end"},[e("v-btn",{attrs:{text:""},on:{click:function(t){a.value=!1}}},[t._v(" Cerrar ")])],1)],1)]}}]),model:{value:t.dialog2,callback:function(a){t.dialog2=a},expression:"dialog2"}}),e("v-dialog",{attrs:{"max-width":"700px"},model:{value:t.dialogStatus,callback:function(a){t.dialogStatus=a},expression:"dialogStatus"}},[e("v-card",{staticClass:"rounded-xl",attrs:{elevation:"7"}},[e("v-card-title",[t._v("Cambiar solicitud con ID "+t._s(t.idSolicitud)+" al estado "+t._s(t.itemStatus.Descripcion))]),e("v-card-text",[e("v-container",[e("v-row")],1)],1),e("v-card-actions",{staticClass:"justify-end"},[e("v-btn",{attrs:{text:""},on:{click:function(a){t.dialogStatus=!1}}},[t._v(" Cerrar ")]),e("v-btn",{attrs:{color:"primary"},on:{click:function(a){return t.putStatusSolicitud()}}},[t._v(" Ok ")])],1)],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(a){var o=a.item;return[e("v-row",[e("v-col",[e("v-icon",{attrs:{medium:""},on:{click:function(a){return t.getSolicitudDetalle(o)}}},[t._v(" "+t._s(t.icons.mdiClipboardList)+" ")]),e("v-menu",{staticClass:"rounded-xl",attrs:{rounded:t.rounded,"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(a){var o=a.attrs,i=a.on;return[e("v-icon",t._g(t._b({attrs:{medium:""}},"v-icon",o,!1),i),[t._v(" "+t._s(t.icons.mdiFormatListText)+" ")])]}}],null,!0)},[e("v-list",t._l(t.dataStatus,(function(a){return e("v-list-item",{key:a.CodEstado,attrs:{link:""},on:{click:function(e){return t.changeStatus(o,a)}}},[e("v-list-item-title",{domProps:{textContent:t._s(a.Descripcion)}})],1)})),1)],1)],1)],1)]}},{key:"no-data",fn:function(){return[e("v-btn",{attrs:{color:"primary"},on:{click:function(a){return t.getReintegro()}}},[t._v(" No Existen Datos ")])]},proxy:!0},{key:"item.nameStatus",fn:function(a){var o=a.item;return[e("v-chip",{staticClass:"font-weight-medium",attrs:{small:"",color:t.getColor(o.nameStatus),dark:""}},[t._v(" "+t._s(o.nameStatus)+" ")])]}}],null,!0)}),[e("div",{staticClass:"text-center"},[e("v-pagination",{attrs:{length:t.totalPagina,circle:"","total-visible":7},on:{input:function(a){return t.pagination()}},model:{value:t.page,callback:function(a){t.page=a},expression:"page"}})],1)]],2)},i=[],n=e("1da1"),s=e("5530"),r=(e("96cf"),e("99af"),e("7db0"),e("94ed")),l=e("bc3a"),c=e.n(l),d=e("0518"),u=e("8a77"),g=e("9a37"),v={data:function(){return{date:new Date(Date.now()-6e4*(new Date).getTimezoneOffset()).toISOString().substr(0,10),menu:!1,icons:{mdiPencil:r["O"],mdiDelete:r["u"],mdiRefreshCircle:r["Q"],mdiEyeCircle:r["y"],mdiWidgets:r["X"],mdiTable:r["S"],mdiClipboardList:r["m"],mdiClipboardListOutline:r["n"],mdiPageLayoutHeader:r["N"],mdiVuetify:r["U"],mdiMagnify:r["M"],mdiFormatListText:r["D"]},dialog:!1,dialog2:!1,dialogLoad:!1,dialogDelete:!1,dialogStatus:!1,snackbar:!1,overlay:!1,loadingData:!1,loadingProrrateo:!1,switch1:!1,loadDelete:!1,row:null,text:"",color:"",search:"",page:1,totalPagina:0,totalRegistros:0,headers:[{text:"ID",align:"start",sortable:!1,value:"IdSolicitud"},{text:"Centro de Costo",value:"CENTRO_COSTO"},{text:"Fecha de Solicitud",value:"FechaSolicitud"},{text:"Monto",value:"Monto"},{text:"Estado",value:"nameStatus"},{text:"Tipo de Pago",value:"Descripcion"},{text:"Beneficiario",value:"Beneficiario"},{text:"Concepto",value:"Concepto"},{text:"Cuenta de Banco",value:"CUENTA_BANCO"},{text:"Usuario",value:"USUARIO"},{text:"",value:"actions",sortable:!1}],headersDetails:[{text:"ID",align:"start",sortable:!1,value:"IdSolicitud"},{text:"Centro de Costo",value:"CENTRO_COSTO"},{text:"Cuenta Contable",value:"Cuenta_Contable"},{text:"Linea",value:"Linea"},{text:"Concepto",value:"Concepto"},{text:"Fecha Factura",value:"FechaFactura"},{text:"Numero Factura",value:"NumeroFactura"},{text:"Establecimiento",value:"NombreEstablecimiento_Persona"},{text:"Monto",value:"Monto"}],headersConcepto:[{text:"ID",align:"start",sortable:!1,value:"IdConcepto"},{text:"Concepto",value:"strDescripcionConcepto"},{text:"Linea",value:"IdLinea"},{text:"Centro de Costo",value:"strCeCo"},{text:"Cuenta Contable",value:"strCuentaContable"},{text:"Descripcion C. Costo",value:"strDescripcionCeco"},{text:"Establecimiento",value:"strEstablecimiento"},{text:"# Empleados",value:"intEmpleados"},{text:"Monto",value:"decMontoPro"},{text:"Fecha Factura",value:"datFechaFactura"},{text:"",value:"actionsEdit",sortable:!1}],dataReintegro:[],dataDetalleReintegro:[],dataStatus:[],editedIndex:-1,items:[],actions:[],idSolicitud:"",conceptoID:0,perPage:10,statusCodeSol:"",linea:0,ceco:0,permisos:[],itemStatus:"",status:""}},computed:{formTitle:function(){return-1===this.editedIndex?"Nueva Solicitud":"Actualizar Producto"},imagen:function(){return this.imagenMiniatura},currentTitle:function(){switch(this.step){case 1:return"Informaci√≥n de la Solicitud";case 2:return"Detalles de la Solicitud";default:return"Solicitud Creada"}}},created:function(){this.getPermisos(),this.getReintegro(),this.getStatus()},methods:{deleteItem:function(t){this.idSolicitud=t.IdSolicitud,this.linea=t.Linea,this.ceco=t.CENTRO_COSTO,this.dialogDelete=!0},deleteItemConfirm:function(){this.deleteLinea()},close:function(){var t=this;this.dialog=!1,this.$nextTick((function(){t.editedItem=Object(s["a"])({},t.defaultItem),t.editedIndex=-1}))},obtenerImagen:function(t){var a=t.target.files[0];this.reintegroItem.Image=a,this.cargarImage(a)},cargarImage:function(t){var a=this,e=new FileReader;e.onload=function(t){a.imagenMiniatura=t.target.result},e.readAsDataURL(t)},closeDelete:function(){this.dialogDelete=!1},getReintegro:function(){var t=this;this.overlay=!0,c.a.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("tknReiFormunica")),c.a.get("/api/reintegro?perPage?".concat(this.perPage)).then((function(a){null===a.data.data?(t.snackbar=!0,t.text="No existen registros en la base de datos",t.overlay=!1,t.totalPagina=0,t.totalRegistros=0,t.page=1):(t.dataReintegro=a.data.data,t.overlay=!1,t.totalPagina=a.data.last_page,t.totalRegistros=a.data.total,t.page=a.data.current_page)})).catch((function(a){console.log(a.message),t.snackbar=!0,t.text="".concat(a.message," - Revise su conexion"),t.overlay=!1,"invalid"===a.response.data.mensaje&&(u["a"].logout(),t.$router.push({name:"pages-login"}))}))},pagination:function(){var t=this.statusCodeSol;""===t||null===t?this.getReintegroPagination():this.getReintegroPaginationStatus()},getReintegroPagination:function(){var t=this;this.overlay=!0,c.a.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("tknReiFormunica")),c.a.get("/api/reintegro?perPage=".concat(this.perPage,"&page=").concat(this.page)).then((function(a){null===a.data.data?(t.snackbar=!0,t.text="No existen registros en la base de datos",t.overlay=!1,t.totalPagina=0,t.totalRegistros=0):(t.dataReintegro=a.data.data,t.overlay=!1,t.totalPagina=a.data.last_page,t.totalRegistros=a.data.total)})).catch((function(a){t.snackbar=!0,t.text="".concat(a.message," - Revise su conexion"),t.overlay=!1,"invalid"===a.response.data.mensaje&&(u["a"].logout(),t.$router.push({name:"pages-login"}))}))},getReintegroPaginationStatus:function(){var t=this;this.overlay=!0,c.a.defaults.headers.common.Authorization="Bearer ".concat(sessionStorage.getItem("tknReiFormunica")),c.a.get("/api/reintegro?perPage=".concat(this.perPage,"&page=").concat(this.page,"&status=").concat(this.statusCodeSol)).then((function(a){null===a.data.data?(t.snackbar=!0,t.text="No existen registros en la base de datos",t.overlay=!1,t.totalPagina=0,t.totalRegistros=0):(t.dataReintegro=a.data.data,t.overlay=!1,t.totalPagina=a.data.last_page,t.totalRegistros=a.data.total)})).catch((function(a){t.snackbar=!0,t.text="".concat(a.message," - Revise su conexion"),t.overlay=!1,"invalid"===a.response.data.mensaje&&(u["a"].logout(),t.$router.push({name:"pages-login"}))}))},getSolicitudDetalle:function(t){var a=this;this.dialog2=!0,this.loadingData=!0,this.dataDetalleReintegro=[],this.statusCodeSol=t.nameStatus,this.idSolicitud=t.IdSolicitud,c.a.get("/api/reintegrodetalle/".concat(t.IdSolicitud)).then((function(t){null===t.data?(a.snackbar=!0,a.text="No Existen Registros en la base de datos",a.dataDetalleReintegro=[],a.loadingData=!1):(a.loadingData=!1,a.dataDetalleReintegro=t.data)})).catch((function(t){a.snackbar=!0,a.text=t.data.mensaje,a.dataDetalleReintegro=[],a.loadingData=!1}))},comprobarLogin:function(){var t=g["a"].enumActions(),a=this.permisos.find((function(a){return a.IDACCION==t.VER_SOLICITUDES_DE_TODOS_LOS_USUARIOS}));0!==a&&null!==a&&void 0!==a||this.$router.push("/dashboard"),d["a"].validateToken()||this.$router.push("/")},getPermisos:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var e,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e=sessionStorage.getItem("userRei"),o=sessionStorage.getItem("roleRei"),a.next=4,c.a.get("/api/permisos/".concat(e,"?role=").concat(o)).then((function(a){t.permisos=a.data.data,t.comprobarLogin()})).catch((function(t){console.log(t)}));case 4:case"end":return a.stop()}}),a)})))()},getStatus:function(){var t=this;c.a.get("/api/status").then((function(a){t.dataStatus=a.data})).catch((function(t){console.log(t)}))},concat:function(t){return"".concat(t.Descripcion," - ").concat(t.CodEstado)},filtrar:function(){var t=this,a=this.statusCodeSol;console.log(a),""===a||null===a?this.getReintegro():(this.overlay=!0,c.a.get("/api/reintegro?status=".concat(a)).then((function(a){t.dataReintegro=a.data.data,t.page=a.data.current_page,t.totalPagina=a.data.last_page,t.totalRegistros=a.data.total,t.overlay=!1})).catch((function(a){t.snackbar=!0,t.text=a,t.overlay=!1})))},getColor:function(t){return"Pendiente"===t?"#0288d1":"Aprobado"===t?"#00838f":"Atendido"===t?"#9e9d24":"En Firma"===t?"#c56000":"Finalizado"===t?"#2e7d32":"Rechazado"===t?"#7f0000":"#102027"},changeStatus:function(t,a){this.dialogStatus=!0,this.itemStatus=a,this.idSolicitud=t.IdSolicitud,this.status=a.CodEstado},putStatusSolicitud:function(){var t=this;c.a.put("/api/reintegroStatus/".concat(this.idSolicitud),{status:this.status}).then((function(a){t.snackbar=!0,t.text=a.data.mensaje,t.dialogStatus=!1,t.pagination()})).catch((function(t){console.log(t)}))}}},m=v,p=e("2877"),h=e("6544"),f=e.n(h),x=e("c6a6"),C=e("8336"),S=e("b0af"),b=e("99d9"),R=e("cc20"),k=e("62ad"),_=e("a523"),D=e("8fea"),y=e("169a"),I=e("ce7e"),P=e("132d"),V=e("8860"),O=e("da13"),T=e("5d23"),E=e("e449"),w=e("a797"),F=e("891e"),L=e("490a"),N=e("0fd9"),A=e("2db4"),M=e("2fa4"),j=e("71d9"),z=e("2a7f"),U=Object(p["a"])(m,o,i,!1,null,null,null);a["default"]=U.exports;f()(U,{VAutocomplete:x["a"],VBtn:C["a"],VCard:S["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VChip:R["a"],VCol:k["a"],VContainer:_["a"],VDataTable:D["a"],VDialog:y["a"],VDivider:I["a"],VIcon:P["a"],VList:V["a"],VListItem:O["a"],VListItemTitle:T["b"],VMenu:E["a"],VOverlay:w["a"],VPagination:F["a"],VProgressCircular:L["a"],VRow:N["a"],VSnackbar:A["a"],VSpacer:M["a"],VToolbar:j["a"],VToolbarTitle:z["a"]})}}]);
//# sourceMappingURL=chunk-2d21ef66.9d825133.js.map